<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Sitplay — คลังรูปภาพพรีเมียม</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"/>
<style>
  * { font-family: 'Noto Sans Thai', 'Inter', sans-serif; }
  body { 
    background: url('bg-pastel.jpg') center/cover fixed;
    color: #1a1a1a; 
    min-height: 100vh; 
  }
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.3);
    pointer-events: none;
    z-index: -1;
  }
  .glass-header {
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.8);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
  }
  .photo-card {
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    border: 1px solid rgba(255, 255, 255, 0.6);
    overflow: hidden;
    background: rgba(255, 255, 255, 0.6);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
  }
  .photo-card:hover {
    transform: translateY(-12px);
    border-color: #7c3aed;
    box-shadow: 0 20px 48px rgba(124, 58, 237, 0.25);
    background: rgba(255, 255, 255, 0.8);
  }
  .photo-card.selected {
    border-color: #7c3aed;
    border-width: 2px;
    background: rgba(124, 58, 237, 0.08);
    box-shadow: 0 12px 32px rgba(124, 58, 237, 0.2);
  }
  .photo-overlay {
    background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.2) 50%, transparent 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  .photo-card:hover .photo-overlay { opacity: 1; }
  .btn-primary {
    background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
    color: white;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    box-shadow: 0 8px 24px rgba(124, 58, 237, 0.3);
  }
  .btn-primary:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 32px rgba(124, 58, 237, 0.4);
  }  .filter-btn {
    transition: all 0.2s ease;
    border: 1px solid rgba(124, 58, 237, 0.2);
    background: rgba(255, 255, 255, 0.5);
    color: #666;
  }
  .filter-btn.active {
    background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
    color: white;
    border-color: #7c3aed;
    box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
  }webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
</style>
</head>
<body>

<!-- Header -->
<header class="glass-header sticky top-0 z-50 px-8 py-4 flex items-center justify-between">
  <div class="flex items-center gap-6">
    <a href="index.html" class="flex items-center gap-3 group">
      <div class="w-9 h-9 bg-gradient-to-br from-green-400 to-emerald-600 rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform">
        <span class="material-symbols-outlined text-white text-xl">layers</span>
      </div>
      <span class="text-2xl font-black gradient-text">Sitplay</span>
    </a>
    <div class="h-6 w-px bg-gray-300 hidden md:block"></div>
    <div class="hidden md:flex items-center gap-2">
      <div id="gd-dot" class="w-2 h-2 rounded-full bg-yellow-400 animate-pulse"></div>
      <span id="gd-status-text" class="text-xs font-bold text-gray-600 uppercase tracking-widest">กำลังเชื่อมต่อ...</span>
    </div>
  </div>

  <div class="flex items-center gap-4">
    <div class="hidden lg:flex items-center gap-2 px-4 py-2 bg-white/50 rounded-full border border-white/60 text-xs font-bold text-gray-700">
      <span id="selected-count" class="gradient-text">0</span> รายการที่เลือก
    </div>
    <button id="deselect-btn" class="hidden md:flex items-center gap-2 px-5 py-2.5 rounded-full text-sm font-bold text-gray-600 hover:text-gray-900 transition-colors">
      <span class="material-symbols-outlined text-lg">deselect</span> ยกเลิกการเลือก
    </button>
    <button id="download-btn" class="btn-primary flex items-center gap-2 px-8 py-2.5 rounded-full text-sm font-extrabold shadow-xl">
      <span class="material-symbols-outlined text-lg">download</span> ดาวน์โหลด
    </button>
    <div class="w-10 h-10 rounded-full overflow-hidden border-2 border-green-400/30 ml-2">
       <img src="https://lh3.googleusercontent.com/aida-public/AB6AXuC0o-gfQox4cBqJWTMJvkR5khtwo-NL1il6jH8Q6VdEQKzEniPT7YqeyVaW75M0tgUjTdjWk4urZ_7bguLJyqKvdASiRGb4HgSsVINQ-p7OY-y8fl99pERLhHctr_R1oeVD_w2lh9iQajKMHPUfbUJsraFbNCGlqkId2NVRdBoE6emcZrCNE0MY36PiY6iesfnS32OkakADEbz_l4Z17aUZWmaS-suIiIYZJFaX5eOrY1OfNTepXjfM8ZRlxgINU1AZl1VEPH4O6iEV" class="w-full h-full object-cover"/>
    </div>
  </div>
</header>

<main class="max-w-[1600px] mx-auto px-8 py-10">

  <!-- Filters & Search -->
  <div class="flex flex-col md:flex-row items-center justify-between gap-6 mb-12">
    <div class="flex items-center p-1.5 bg-white/50 rounded-2xl border border-white/60">
      <button id="filter-all" class="filter-btn active px-8 py-2.5 rounded-xl text-sm font-bold">ทั้งหมด</button>
      <button id="filter-recent" class="filter-btn px-8 py-2.5 rounded-xl text-sm font-bold">ล่าสุด</button>
      <button id="filter-favorites" class="filter-btn px-8 py-2.5 rounded-xl text-sm font-bold">รายการโปรด</button>
    </div>

    <div class="flex items-center gap-4 w-full md:w-auto">
      <div class="relative flex-1 md:w-96 group">
        <span class="material-symbols-outlined absolute left-5 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:gradient-text transition-colors">search</span>
        <input id="search-input" type="text" placeholder="ค้นหารูปภาพ..." class="w-full bg-white/60 border border-white/60 rounded-2xl py-3.5 pl-14 pr-6 text-sm outline-none focus:ring-2 focus:ring-green-400/50 focus:bg-white transition-all"/>
      </div>
      <button id="add-photo-btn" class="w-12 h-12 flex items-center justify-center bg-green-400/10 text-green-600 rounded-2xl border border-green-400/20 hover:bg-green-400 hover:text-white transition-all">
        <span class="material-symbols-outlined text-2xl">add_photo_alternate</span>
      </button>
    </div>
  </div>

  <!-- Status Info -->
  <div class="flex items-center justify-between mb-8 px-2">
    <h2 class="text-2xl font-extrabold tracking-tight text-gray-900">คลังรูปภาพ</h2>
    <p id="photo-count-text" class="text-xs font-bold uppercase tracking-widest text-gray-500">กำลังโหลด...</p>
  </div>

  <!-- Photo Grid -->
  <div id="photo-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-6">
    <div class="skeleton aspect-square rounded-3xl"></div>
    <div class="skeleton aspect-square rounded-3xl"></div>
    <div class="skeleton aspect-square rounded-3xl"></div>
    <div class="skeleton aspect-square rounded-3xl"></div>
    <div class="skeleton aspect-square rounded-3xl"></div>
    <div class="skeleton aspect-square rounded-3xl"></div>
  </div>

</main>

<script>
  const DEMO_PHOTOS = [];
  // Waiting for real-time data from Google Drive
  
  const DEMO_PHOTOS_BACKUP = [
    { id: '1', name: 'mountain_lake_01.jpg', category: 'landscape', favorite: true, url: 'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=500&q=80' },
    { id: '2', name: 'misty_forest_22.jpg', category: 'nature', favorite: false, url: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=500&q=80' },
    { id: '3', name: 'morning_sunlight.jpg', category: 'nature', favorite: true, url: 'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=500&q=80' },
    { id: '4', name: 'aerial_peaks.jpg', category: 'landscape', favorite: false, url: 'https://images.unsplash.com/photo-1447752875215-b2761acb3c5d?w=500&q=80' },
    { id: '5', name: 'green_valley.jpg', category: 'landscape', favorite: false, url: 'https://images.unsplash.com/photo-1501854140801-50d01698950b?w=500&q=80' },
    { id: '6', name: 'waterfall_forest.jpg', category: 'nature', favorite: true, url: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=500&q=80' },
    { id: '7', name: 'tropical_forest.jpg', category: 'nature', favorite: false, url: 'https://images.unsplash.com/photo-1501854140801-50d01698950b?w=500&q=80' },
    { id: '8', name: 'leaf_drops.jpg', category: 'nature', favorite: false, url: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=500&q=80' },
    { id: '9', name: 'mountain_sunset.jpg', category: 'landscape', favorite: true, url: 'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=500&q=80' },
    { id: '10', name: 'autumn_bridge.jpg', category: 'landscape', favorite: false, url: 'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=500&q=80' },
    { id: '11', name: 'ocean_sunrise.jpg', category: 'landscape', favorite: false, url: 'https://images.unsplash.com/photo-1447752875215-b2761acb3c5d?w=500&q=80' },
    { id: '12', name: 'autumn_tree.jpg', category: 'nature', favorite: false, url: 'https://images.unsplash.com/photo-1501854140801-50d01698950b?w=500&q=80' },
  ];

  let allPhotos = [];
  let selectedIds = new Set();
  let currentFilter = 'all';

  function setStatus(state) {
    const dot = document.getElementById('gd-dot');
    const text = document.getElementById('gd-status-text');
    if (state === 'connected') {
      dot.className = 'w-2 h-2 rounded-full bg-green-500';
      text.textContent = 'Google Drive พร้อมใช้งาน';
      text.className = 'text-xs font-bold text-green-600 uppercase tracking-widest';
    } else {
      dot.className = 'w-2 h-2 rounded-full bg-gray-400';
      text.textContent = 'โหมดสาธารณะ';
      text.className = 'text-xs font-bold text-gray-600 uppercase tracking-widest';
    }
  }

  function loadDemo() {
    allPhotos = DEMO_PHOTOS;
    applyFilter();
    setStatus('waiting');
    console.log('Ready to receive photos from Google Drive...');
  }

  function renderPhotos(photos) {
    const grid = document.getElementById('photo-grid');
    document.getElementById('photo-count-text').textContent = `พบ ${photos.length} รูปภาพ`;
    
    if (!photos.length) {
      grid.innerHTML = '<div class="col-span-full py-20 text-center text-gray-400 font-bold uppercase tracking-widest">ไม่พบรูปภาพในคอลเลกชันนี้</div>';
      return;
    }

    grid.innerHTML = photos.map((p, i) => `
      <div class="photo-card relative aspect-square rounded-[2rem] bg-white/60 cursor-pointer group ${selectedIds.has(p.id) ? 'selected' : ''}" data-id="${p.id}" style="animation: fadeIn 0.5s ease forwards; animation-delay: ${i*0.05}s; opacity:0;">
        <img src="${p.url}" class="w-full h-full object-cover" alt="${p.name}"/>
        <div class="photo-overlay absolute inset-0 p-6 flex flex-col justify-between">
          <div class="flex justify-between items-start">
            <div class="w-6 h-6 rounded-full border-2 border-white/50 flex items-center justify-center group-hover:border-white transition-colors ${selectedIds.has(p.id) ? 'bg-green-400 border-green-400' : ''}">
              ${selectedIds.has(p.id) ? '<span class="material-symbols-outlined text-white text-[16px] font-bold">check</span>' : ''}
            </div>
            <button class="favorite-btn w-10 h-10 rounded-full bg-black/40 backdrop-blur-md flex items-center justify-center hover:scale-110 transition-transform ${p.favorite ? 'text-yellow-400' : 'text-white/40'}" data-id="${p.id}">
              <span class="material-symbols-outlined font-variation-fill">${p.favorite ? 'star' : 'star'}</span>
            </button>
          </div>
          <div>
            <p class="text-white font-bold truncate text-sm mb-1">${p.name}</p>
            <p class="text-white/50 text-[10px] font-black uppercase tracking-widest">${p.category}</p>
          </div>
        </div>
      </div>
    `).join('');

    grid.querySelectorAll('.photo-card').forEach(card => {
      card.addEventListener('click', (e) => {
        if (e.target.closest('.favorite-btn')) return;
        toggleSelect(card.dataset.id);
      });
    });

    grid.querySelectorAll('.favorite-btn').forEach(btn => {
      btn.addEventListener('click', () => toggleFavorite(btn.dataset.id));
    });
  }

  function toggleSelect(id) {
    if (selectedIds.has(id)) selectedIds.delete(id);
    else selectedIds.add(id);
    document.getElementById('selected-count').textContent = selectedIds.size;
    applyFilter();
  }

  function toggleFavorite(id) {
    const photo = allPhotos.find(p => p.id === id);
    if (photo) {
      photo.favorite = !photo.favorite;
      applyFilter();
    }
  }

  function applyFilter() {
    let filtered = allPhotos;
    if (currentFilter === 'recent') filtered = [...allPhotos].reverse().slice(0, 6);
    else if (currentFilter === 'favorites') filtered = allPhotos.filter(p => p.favorite);
    
    const q = document.getElementById('search-input').value.toLowerCase();
    if (q) filtered = filtered.filter(p => p.name.toLowerCase().includes(q));
    
    renderPhotos(filtered);
  }

  document.getElementById('filter-all').addEventListener('click', () => setFilter('all'));
  document.getElementById('filter-recent').addEventListener('click', () => setFilter('recent'));
  document.getElementById('filter-favorites').addEventListener('click', () => setFilter('favorites'));
  document.getElementById('search-input').addEventListener('input', applyFilter);
  document.getElementById('deselect-btn').addEventListener('click', () => {
    selectedIds.clear();
    document.getElementById('selected-count').textContent = '0';
    applyFilter();
  });

  document.getElementById('download-btn').addEventListener('click', async () => {
    if (selectedIds.size === 0) {
      alert('กรุณาเลือกรูปภาพที่ต้องการดาวน์โหลด');
      return;
    }

    const photosToDownload = allPhotos.filter(p => selectedIds.has(p.id));
    
    for (const photo of photosToDownload) {
      try {
        const response = await fetch(photo.url);
        const blob = await response.blob();
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        let fileName = photo.name;
        if (!fileName.toLowerCase().endsWith('.jpg')) {
          const baseName = fileName.substring(0, fileName.lastIndexOf('.')) || fileName;
          fileName = baseName + '.jpg';
        }
        a.download = fileName;
        document.body.appendChild(a);
        a.click();
        window.URL.revokeObjectURL(url);
        document.body.removeChild(a);
      } catch (error) {
        console.error('ดาวน์โหลดล้มเหลว:', photo.name);
        const a = document.createElement('a');
        a.href = photo.url;
        a.target = '_blank';
        a.download = photo.name;
        a.click();
      }
    }
  });

  function setFilter(f) {
    currentFilter = f;
    document.querySelectorAll('.filter-btn').forEach(b => {
      b.classList.remove('active');
    });
    document.getElementById('filter-' + f).classList.add('active');
    applyFilter();
  }

  loadDemo();
</script>
</body>
</html>
